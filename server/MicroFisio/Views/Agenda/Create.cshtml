@model MicroFisio.Models.ViewModels.AgendamentoCreateViewModel
@{
    ViewData["Title"] = "Agendar";
}
<link rel="stylesheet" href="~/css/Agenda.css" />
<div class="agenda-form">
  <div class="agenda-form-card">
    <h2 id="formTitle">Agendar</h2>
    <form asp-action="Create" method="post">
      <div class="form-grid">
        <div class="form-field">
          <label for="PacienteId">Paciente</label>
          <select id="PacienteId" name="PacienteId" required>
            <option value="">Selecione</option>
            @foreach (var p in Model.Pacientes)
            {
              if (Model.PacienteId == p.Id)
              {
                  <option value="@p.Id" selected>@p.Nome</option>
              }
              else
              {
                  <option value="@p.Id">@p.Nome</option>
              }
            }
          </select>
        </div>
        <div class="form-field">
          <label for="Data">Data</label>
          <input id="Data" name="Data" type="date" value="@Model.Data.ToString("yyyy-MM-dd")" required />
        </div>
        <div class="form-field">
          <label for="Hora">Hora</label>
          <input id="Hora" name="Hora" type="time" value="@Model.Hora" required />
        </div>
        <div class="form-field">
          <label for="Tipo">Tipo</label>
          <select id="Tipo" name="Tipo">
          @if (Model.Tipo=="avaliacao") { <option value="avaliacao" selected>Avaliação</option>; } else { <option value="avaliacao">Avaliação</option>; }
          @if (Model.Tipo=="consulta") { <option value="consulta" selected>Consulta</option>; } else { <option value="consulta">Consulta</option>; }
          @if (Model.Tipo=="retorno") { <option value="retorno" selected>Retorno</option>; } else { <option value="retorno">Retorno</option>; }
          </select>
        </div>
        <div class="form-field">
          <label for="DuracaoMinutos">Duração</label>
          <select id="DuracaoMinutos" name="DuracaoMinutos">
          @if (Model.DuracaoMinutos==30) { <option value="30" selected>30 min</option>; } else { <option value="30">30 min</option>; }
          @if (Model.DuracaoMinutos==60) { <option value="60" selected>60 min</option>; } else { <option value="60">60 min</option>; }
          </select>
        </div>
        <div class="form-field form-field-full">
          <label for="Observacoes">Observações</label>
          <textarea id="Observacoes" name="Observacoes" rows="2">@Model.Observacoes</textarea>
        </div>
      </div>
      <div class="form-actions">
        <button type="submit" class="btn-primary" id="btnSalvar">Salvar</button>
        <a class="btn-secondary" asp-action="Index">Voltar</a>
      </div>
      @Html.AntiForgeryToken()
    </form>
  </div>
</div>
